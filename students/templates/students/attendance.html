{% extends 'students/base.html' %}
{% load static %} 
{% load i18n %} 
{% block title %}
{% trans "Attendance" %} - CollegeERP
{% endblock %} 
{% block content %}
<div class="card mb-3">
  <div class="card-header">
    <i class="fas fa-table"></i>
    <b>{% trans "Attendance" %}</b>
  </div>
  <div class="card-body">
    <div class="table-responsive">
      <table
        class="table table-bordered text-center"
        id="dataTable"
        width="100%"
        cellspacing="0"
      >
        <thead class="thead-light">
          <tr>
            <th>{% trans "Course ID" %}</th>
            <th>{% trans "Course name" %}</th>
            <th>{% trans "Attended classes" %}</th>
            <th>{% trans "Total classes" %}</th>
            <th>{% trans "Attendance %" %}</th>
            <th>{% trans "Classes to attend" %}</th>
          </tr>
        </thead>
        <tbody>
          {% for data in attendance_data %}
          <tr>
            <td>{{ data.subject.id }}</td>
            <td><a href="#">{{ data.subject.name }}</a></td>
            <td>{{ data.attended_classes }}</td>
            <td>{{ data.total_classes }}</td>
            {% if data.attendance_percentage < 75 %}
            <td class="p-3 mb-2 bg-danger text-white">
              {{ data.attendance_percentage }}
            </td>
            {% else %}
            <td class="p-3 mb-2 bg-success text-white">
              {{ data.attendance_percentage }}
            </td>
            {% endif %}
            <td>{{ data.classes_to_attend }}</td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="6">{% trans "Student has no courses" %}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}
